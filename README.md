# Flutter GetX + Firebase (Phone OTP) + REST CRUD

Modern gradient UI, GetX architecture, Firebase phone authentication (mobile & web), and CRUD against https://restful-api.dev.

## Quick Start

> **Requires:** Flutter 3.22+ and Dart 3.4+, Firebase project.

1. **Create Firebase project**
   - Go to **Firebase Console** → *Add project*.
   - Enable **Authentication → Sign-in method → Phone**.
   - **Web**: Add an app, note the appId; under Authentication → **Settings** add your domain (e.g. `localhost`, `127.0.0.1`, and your hosting domain). reCAPTCHA is handled automatically; you may configure reCAPTCHA v3 if required.
   - **Android**: Add Android app with package name (see `android/app/build.gradle`). Add SHA-1 (and SHA-256) from `gradlew signingReport` for phone auth. Download `google-services.json`.
   - **iOS**: Add app, download `GoogleService-Info.plist`. In Firebase console, enable **Push capability** later if needed.

2. **Configure with FlutterFire**
   ```bash
   dart pub global activate flutterfire_cli
   flutterfire configure
   ```
   This generates `lib/firebase_options.dart` and updates platforms. It **replaces** the placeholder file shipped here.

3. **Install dependencies**
   ```bash
   flutter pub get
   ```

4. **Run the app**
   - **Web (recommended first run):**
     ```bash
     flutter run -d chrome
     ```
     Phone auth will present reCAPTCHA. Make sure your domain is whitelisted.
   - **Android:**
     ```bash
     flutter run -d android
     ```
     Ensure SHA-1 is registered on Firebase → *Project settings → Android app → Add fingerprint*.
   - **iOS (optional):**
     ```bash
     cd ios && pod install && cd ..
     flutter run -d ios
     ```

## Architecture

```
lib/
  app/
    controllers/      # GetX controllers (Auth, Object)
    data/
      models/         # ObjectModel
      services/       # ApiService
    routes/           # GetX routes
    theme/            # Gradient theme
    ui/
      pages/          # Login, OTP, Home, Detail, Edit
      widgets/        # Shared widgets
  firebase_options.dart  # generated by FlutterFire
  main.dart
```

- **State + Nav**: GetX for DI, routing, and reactive state.
- **API**: `ApiService` wraps HTTP methods (GET list/detail, POST create, PUT update, DELETE delete).
- **UI**: Gradient background via `GradientScaffold`, responsive cards, loading/empty/error states.
- **Auth**: Phone OTP with platform-specific flows (web uses `signInWithPhoneNumber`, mobile uses `verifyPhoneNumber`).

## CRUD Notes

- API base: `https://api.restful-api.dev/objects`
- Create body: `{ "name": "...", "data": { ... } }`
- Update uses **PUT**.
- Delete prompts confirmation with optimistic UI.

## Unit Tests

- `test/api_service_test.dart` — verifies `createObject` uses POST and parses response.
- `test/object_controller_test.dart` — controller update logic.

Run:
```bash
flutter test
```

## Deployment

### Web → Firebase Hosting
1. Build:
   ```bash
   flutter build web --release
   ```
2. Initialize hosting:
   ```bash
   npm install -g firebase-tools
   firebase login
   firebase init hosting
   # select the same Firebase project; set public directory to build/web
   ```
3. Deploy:
   ```bash
   firebase deploy --only hosting
   ```

### Android APK/AAB
```bash
flutter build apk --release
# or
flutter build appbundle --release
```

## Common Pitfalls

- **Phone auth on Android**: Missing SHA-1/256 → code not received or auto verification fails.
- **Web reCAPTCHA**: Add domain whitelist under *Auth → Settings → Authorized domains*.
- **CORS / Adblockers**: Some extensions can block reCAPTCHA; test in incognito.
- **API quota**: Public API can throttle; handle errors gracefully (snackbars in app).

## Replace Package Name
Edit `android/app/build.gradle` and `ios/Runner.bundleIdentifier` if you change the app ID. Re-run `flutterfire configure` after changing.

---

**Made for your assignment with a modern gradient UI.**
